{% extends "base.html" %}

{% block title %}Analysis Result | PnuemoScan AI{% endblock %}

{% block body %}
<div class="card result-card animate-fade-in">
    <h2 style="font-size: 2rem; margin-bottom: 2rem; font-weight: 700;">Diagnostic Analysis Complete</h2>

    <div style="position: relative; display: inline-block;">
        <img src="{{ url_for('static', filename='uploads/' + name) }}" alt="Analyzed X-ray" class="result-image">
        <div
            style="position: absolute; top: 1rem; right: 1rem; background: rgba(0,0,0,0.5); padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.8rem; backdrop-filter: blur(4px);">
            ID: {{ name }}
        </div>
    </div>

    <div style="margin-top: 1rem;">
        <p style="color: var(--text-muted); font-size: 1.1rem; margin-bottom: 0.5rem;">Detected Status:</p>
        {% if result == 1 %}
        <div class="status-badge status-detected">
            <span style="display: flex; align-items: center; gap: 0.5rem;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                    stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                Pneumonia Positive
            </span>
        </div>
        <p
            style="margin-top: 1.5rem; color: #f87171; line-height: 1.6; max-width: 500px; margin-left: auto; margin-right: auto;">
            The AI model has detected patterns consistent with pneumonia. Please consult a medical professional
            immediately for a comprehensive evaluation.
        </p>
        {% else %}
        <div class="status-badge status-normal">
            <span style="display: flex; align-items: center; gap: 0.5rem;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
                Normal / Negative
            </span>
        </div>
        <p
            style="margin-top: 1.5rem; color: #34d399; line-height: 1.6; max-width: 500px; margin-left: auto; margin-right: auto;">
            The AI model did not detect significant indicators of pneumonia in the provided scan. Continue to monitor
            symptoms and follow medical advice.
        </p>
        {% endif %}
    </div>

    <div style="margin-top: 3rem; display: flex; justify-content: center; gap: 1rem;">
        <a href="/" class="btn-primary"
            style="margin-top: 0; background: var(--glass); border: 1px solid var(--glass-border); box-shadow: none;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            New Analysis
        </a>
    </div>
</div>

<div class="card" style="background: rgba(79, 70, 229, 0.05); border-color: rgba(79, 70, 229, 0.2);">
    <h3 style="margin-bottom: 1rem; color: var(--primary);">Model Confidence Disclaimer</h3>
    <p style="color: var(--text-muted); font-size: 0.95rem; line-height: 1.6;">
        This assessment is based on a convolutional neural network trained on over 5,000 chest X-ray images. While
        highly accurate, AI models can produce false positives or false negatives. This output should be used as a
        supportive reference alongside clinical diagnosis by a qualified radiologist.
    </p>
</div>
{% endblock %}